# Dockerfile for Backend API
FROM node:18-alpine AS base

WORKDIR /app

# Install dependencies
COPY package.json package-lock.json* ./
RUN npm ci --only=production

# Copy source code
COPY server ./server
COPY tsconfig.json ./

# Install TypeScript globally
RUN npm install -g typescript ts-node

# Expose port
EXPOSE 5000

ENV NODE_ENV=production

# Start the server
CMD ["ts-node", "server/index.ts"]
